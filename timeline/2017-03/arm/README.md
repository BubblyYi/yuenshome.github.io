[![header](../../../assets/header02.jpg)](https://yuenshome.github.io)

# ARM内核和架构关系、ARM的Fabless模式及三大授权方式

这两天在做Cortex-A53还有A72上的benchmarks，所以搜了下相关文章科普下自己，发现有两篇文章讲的不错，这里转载并重新编辑整理。第一篇文章写的比较简单，更多的是从感性认识ARM内核和架构，第二篇文章着重讲ARM全新架构，同时也在文中讲解了ARM逐层获利的方式，BIG.little架构以及未来发展等等。[toc]<!--more-->
<h1>1. ARM内核和架构的关系</h1>
好比你盖房子刚开始因为水平低 流行盖平房，这就是一种架构（V5T）；然后这种平房架构你可以设计出一款独立卫生间的款式 这叫ARM7内核；然后其他人（芯片设计公司）想盖房子的就买你这个图纸去盖；然后过一段时间，有人觉得光独立卫生间还不够啊 我还想有个小院子，好吧，那ARM就满足你们，就出个带小院子的款式（ARM9）； 又过了很久，这种平房的架构就随着大伙的需求一直改啊改啊。

后来经过ARM研究发现现在大伙盖房子的能力duang duang直升啊（包括工艺、设计能力、时钟主频） 只盖这种平房施展不开啊 好吧ARM为了不让这帮设计的人闲着 就推出一种二三层楼房的样式 这因为跟平房设计结构完全不一样嘛 那就叫一种新的架构（V6） 同样这种楼房样式ARM也为大家准备了带游泳池的和带车库的款式（ARM11各种）。

好吧继续改啊改啊，改到后来大家已经开始有能力盖十层以上的大楼了 ARM一如既往地出了新的款式（V7架构） 这时ARM觉得以前尼玛名字都太土鳖了，什么ARM5 ARM6 ARM7又难听又难记，劳资要取个看起来牛逼的名字，咱至少也算个能设计摩天大楼的主了，于是后面的内核都叫cortex。

改名只是一部分 随着这个架构出来后 ARM发现 以前用咱们图纸盖出的楼也就做个民宅，民宅图个啥，实惠嘛（功耗低） 现在不一样了，现在咱的图纸盖得楼不仅可以做民宅 还可以做军事基地，还可以做高档写字楼，以前这些高级功能的楼房可是只有小英（英特尔）才设计得来的啊，为了满足这些不同的需求。ARM把这个架构设计出来的款式分成3个系列（M系列、R系列、A系列）。

M系列是为民宅设计的 因为老百姓图实惠嘛 这种设计就设计个十层左右（功耗低） R系列是为军事基地设计的 这种楼设计的也不高 十层左右吧 但是关键是要对特殊情况要有快速反应的能力（中断快） 最后A系列是给商业大佬用的 那当然是要高端大气上档次 就是要高（性能高）各种LED灯灯光秀啊都给我上。
<h1>2. ARM公司的Fabless模式以及三大授权方式</h1>
ARM近日推出全新的DynamIQ技术，并表示作为未来ARM Cortex-A系列处理器的基础，基于ARM big.LITTLE技术演进的DynamIQ技术相比上一代技术将提供更多的核心搭配方式，并覆盖从端到云的安全、通用平台。其中最令人感到惊讶的是ARM副总裁及计算产品事业部总经理Nandan Nayampally宣称根据ARM测算，到2020年左右搭载DynamIQ的ARM下一代芯片将比现在在人工智能表现上有50倍的性能提升。而在介绍DynamIQ技术之前先跟随笔者一起简单了解一下移动芯片领导者的ARM公司吧。

<img class="aligncenter" src="http://yuenshome-wordpress.stor.sinaapp.com/uploads/2017/03/arm-01.jpg" alt="" width="581" height="403" />
<p style="text-align: center;">ARM副总裁及计算产品事业部总经理 Nandan Nayampally</p>

<h2>2.1 <strong><span style="color: #ff0000;">Fabless模式</span>助ARM用27年完成1000亿芯片出货量</strong></h2>
伴随近些年智能手机的火热，ARM这三个字母开始被大众所熟知。但大部分人所不知道的其实ARM公司的前身Acorn早在1978年就由物理学家赫尔曼·豪泽(Hermann Hauser)和工程师Chris Curry在英国伦敦正式成立。1990年ARM从Acorn分拆出来开启了自己的传奇之路。借助90年代手机的快速发展，2002年基于ARM技术的芯片出货量累计达到了10亿片，而此后的15年更是如开挂一般：2005年一年出货量就完成10亿片，2010年10亿片的出货速度缩短到了1个季度，到了2013年更是将时间进一步缩短到只用一个月，并于2017年宣布正式达成1000亿芯片出货量的里程碑，而在辉煌成绩的背后，Fabless这种独特的授权模式功不可没，而Fabless到底是什么呢?

<span style="color: #ff0000;"><strong>在半导体芯片行业，企业的模式主要分三种，一种是从设计，到制造、封装测试以及投向消费市场一条龙全包的企业，称为IDM(Integrated Design and Manufacture)公司</strong></span>，比如我们所熟知的英特尔。IDM模式的好处在于由于所有环节均一手包办所以从IC 设计到完成IC制造所需的时间较短也不存在工艺流程对接的问题，缺点也很明显，那就是对资金的需求堪称海量，以台积电将要新建的18英寸晶圆厂为例，预算高达159亿美元，这显然不是一般半导体厂商所能承受的。

<strong><span style="color: #ff0000;">说到Fabless就要提Foundry(代工厂)，Fabless是只做设计不做生产，代表企业就是ARM</span></strong>。ARM不制造、不销售任何芯片，只是自己设计IP，包括指令集架构、微处理器、图形核心、互连架构，然后谁喜欢谁想要就把授权卖给谁。至于客户拿到ARM的IP后想怎么干完全不管。

而Foundry(代工厂)的代表企业台积电和Global Foundry是只做代工不做设计。Fabless的优点在于设计灵活，设计成本低，而缺点则是需要与代工厂配合，比如当你设计出10nm的芯片之后，如果代工厂工艺没达到时你只能干着急。<strong><span style="color: #ff0000;">不过由于英特尔这类的传统半导体大厂过去对移动市场的不重视，使得没有什么竞争的ARM公司快速发展起来，而将其真正推向巅峰的则是其独特的授权模式</span></strong>。
<h2>2.2 <span style="color: #ff0000;">三大授权模式</span>助ARM架构百花齐放</h2>
<strong><span style="color: #ff0000;">ARM公司根据技术划分的高级别类型，按照授权对象、用途来说有很多种方式。而我们目前在市场上所熟知的从高到低有三种：架构层级授权、内核层级授权、使用层级授权</span></strong>。

<img class="aligncenter" src="http://yuenshome-wordpress.stor.sinaapp.com/uploads/2017/03/arm-02.jpg" alt="" width="581" height="403" />
<p style="text-align: center;">ARM授权制度</p>
<span style="color: #ff0000;"><strong>架构层级授权</strong></span>，是指可以<strong><span style="color: #ff0000;">对ARM架构进行大幅度改造，甚至可以对ARM架构进行大幅度改造，甚至可以对ARM指令集进行扩展或缩减，以便达到更高性能、更低功耗或更低成本等不同目的，授权费用也最为昂贵</span></strong>。这方面的代表企业就是苹果，高通和三星。

<span style="color: #ff0000;"><strong>内核层级授权</strong></span>，是指<strong><span style="color: #ff0000;">用户可以将其所购买的ARM核心应用到其自行设计的芯片中。但用户不得对其购买的ARM核心本身进行修改，但可以以内核为基础然后再加上自己的外设(比如基带)，授权费用居中</span></strong>，代表企业就是我们最熟知的华为麒麟处理器了。

<img class="aligncenter" src="http://yuenshome-wordpress.stor.sinaapp.com/uploads/2017/03/arm-03.jpg" alt="QQ截图20170327084329.jpg" width="450" height="254" data-bd-imgshare-binded="1" />
<p style="text-align: center;">华为麒麟</p>
<strong><span style="color: #ff0000;">使用层级授权</span></strong>，<strong><span style="color: #ff0000;">拥有使用授权的用户只能购买已经封装好的ARM处理器核心，而如果想要实现更多功能和特性，则只能通过增加封装之外的DSP核心的形式来实现(当然，也可以通过对芯片的再封装方法来实现)，授权价格最便宜</span></strong>。目前绝大部分中国企业拿到的均是这种授权。

三大授权模式可以满足任何企业的任何需求，从上层市场来说，苹果、三星、高通三家由于具有强大的芯片设计能力，可以通过使用自主架构来形成差异性竞争，而至于技术实力欠缺一筹的其他公司来也有公版架构来选用，这就使得ARM的芯片设计制造生态圈出现了百花齐放百家争鸣的现象。根据ARM公司现场公布的数据，在已出货的1000亿颗基于ARM的芯片中，有500亿颗是由ARM的合作伙伴从2013年到2017年出货的。<strong><span style="color: #ff0000;">这些数据恰好证明了ARM授权模式的成功，但与此同时也衍生出一个问题，那就是越来越多的企业开始尝试自主设计架构，让ARM的公版架构面临成为鸡肋的风险</span></strong>。不过作为移动SOC市场上除高通外唯一能同时拥有CPU和GPU技术的公司，ARM显然更希望生态圈内的合作伙伴能更多的使用ARM自身开发的架构。而随着物联网，人工智能，云计算等行业的兴起，ARM也加快了自身架构的研发速度，于是DynamIQ横空问世。
<h2>2.3 回归单集群设计以退为进</h2>
从早期为了突破单核性能的最多支持4颗核心的Mlticore单集群，到为了实现功耗优化最多支持八核心的双集群架构big.LITTLE，再到现在为了推出的DynamIQ单一集群技术。可以看出ARM公司从始至终都秉承着高性能、低功耗、低价格的三大基础原则进行技术演进。从双集群到单集群的设计看似倒退实则是一次技术革命。以上一代big.LITTLE架构为例，<strong><span style="color: #ff0000;">big.LITTLE架构分为高性能集群和低功耗集群</span></strong>，<strong><span style="color: #ff0000;">每个集群最多各四颗核心</span></strong>。<strong><span style="color: #ff0000;">在运行复杂大型程序时开启高性能集群，而在运行简单程序时则开启低功耗集群</span></strong>，这种做法尽管可以降低功耗但在灵活性上相比DynamIQ仍然稍逊一筹，例如，1+3或者1+7的SoC设计配置都是无法实现的，而这些都是在异构计算和具有人工智能的设备上需要优先考虑的。而全新的DynamIQ架构可以在一个集群内放置不同类型(按性能功耗分为：高性能高功耗和低性能低功耗)的核心来满足例如图像识别，语音识别核心，运算核心等等不同的功能需求，每种功能对功耗自然有着不同的需求。在同一个集群内无缝切换核心的设计增强了在同等芯片面积下的设计灵活性。重新设计的内存子系统也将提高数据读取能力并保持节能特性。

<img class="aligncenter" src="http://yuenshome-wordpress.stor.sinaapp.com/uploads/2017/03/arm-04.jpg" alt="QQ截图20170327084349.jpg" width="450" height="226" data-bd-imgshare-binded="1" />
<p style="text-align: center;">回归单集群设计提供更多核心组合方式</p>
Nandan Nayampally用一个例子来表述，<strong><span style="color: #ff0000;">例如物联网时代的智能监控。当有人进屋监控设备听到声音的时候，也许是负责声音识别的核心开启工作，而当看到影子的时候也许是负责简单图像识别例如分清是人还是物的核心开启工作。到了人能显现的时候就是负责面部识别核心开启工作</span></strong>。DynamIQ的英文发音同单词Dynamic完全一致，而Dynamic的中文意思正是动态、充满变数，相信这也是命名DyanmIQ的原因之一。
<h2>2.4 ML和AI指令集助力DynamIQ占领人工智能市场</h2>
智能语音、图像识别、自动驾驶、无人机、个人助理这些人工智能的应用场景相信大家都不陌生，而在刚刚结束的两会上人工智能首次写入政府报告中可以看出目前人工智能的重要性。人工智能能否实现有两个重要因素：计算力和算法。而这次的DynamIQ发布会上，Nandan Nayampally特意用了很长的篇幅介绍DynamIQ的诸多特性。相信这也是DynamIQ单词的最后两个字母用IQ的深意。

ARM公司认为在加速人工智能和机器学习方面应通过对CPU以及片上系统两方面性能的提升来实现的。指令集是处理器的灵魂，<strong><span style="color: #ff0000;">尽管传统的ARM芯片已被用于人工智能领域，但由于缺乏原生指令集使得目前的ARM芯片在不论机器学习还是人工智能方面的执行效率都不甚理想</span></strong>。<strong><span style="color: #ff0000;">为此ARM公司开发了原生的ML(机器学习)和AI(人工智能)指令集并加入DynamIQ之中来提升芯片在人工智能领域的表现</span></strong>，根据ARM自身的测算，在未来的3·5年时间内，借助DynamIQ专用的处理器指令和优化库架构将使得人工智能运算性能提升50倍。这也将成为未来Cortex-A 8系列处理器的基础，让ARM公版架构同其他第三方架构形成差异性竞争。
<h2>2.5 安全第一</h2>
随着物联网时代的到来，安全问题变得日益严重，在ARM看来<strong><span style="color: #ff0000;">提高安全性主要有以下三个方面：高性能，快响应和能够快速进行故障恢复</span></strong>。以汽车行业为例，今天一台高端豪华汽车中应用的电子控制单元多达几十，而目前大量的汽车所采用的正是ARM芯片，而芯片的稳定性与安全性关乎着车上所有乘客的安全。本次发布的DynamIQ技术专门为ADAS(高级驾驶辅助系统)推出解决方案，来提升整体安全性和可靠性，并确保合作伙伴能够设计ASIL-D合规系统，即使在<strong><span style="color: #ff0000;">故障情况下仍然能够安全运行</span></strong>。
<h2>2.6 企业市场大战一触即发</h2>
ARM对企业市场野心早已路人皆知，而在本次发布会上Nandan Nayampally更是提出了：“计算在哪，ARM就在哪。”的口号，并特意指出<strong><span style="color: #ff0000;">DyanmIQ在企业级市场非常看重的：I/O、内存带宽、稳定性、能耗比，稳定安全性</span></strong>等多个关键换节点上都做出了相应的优化设计。由于没有详细数据，笔者无法知晓DynamIQ具体表现到底如何只是知道如果想拿下企业市场，生态圈的支持是必不可少的，而这时候就不得不提到微软。

在本月举办的Open Compute Project峰会上，微软曾放出惊人消息，宣布Windows Server已经支持在AMR芯片上运行并声称现在客户完全可以考虑基于ARM芯片的Windows Server 服务器平台。而在Open Compute Project峰会之前就<span style="color: #ff0000;"><strong>微软Azure云业务副总裁詹森·桑德就表示微软</strong></span>正在测试ARM芯片，将其应用到搜索、存储、机器学习和大数据等领域。桑德称：“虽然目前尚未部署，但<strong><span style="color: #ff0000;">下一步使用ARM处理器是件很自然的事情</span></strong>。”

而在笔者在发布会中间休息时间私下与ARM资深总监俞爱玲就如何看待ARM未来在服务器市场发展这一问题交流时，俞女士大方的表示尽管ARM过去在服务器市场份额几乎为零，但一切都在云计算时代得到改变，比如微软已经开始将ARM处理器应用到自家的云计算服务器中。笔者认为这意味着服务器的芯片大战一触即发。而除了服务器市场外，未来的网络通信设备，嵌入式等等多个领域都将开始激烈的竞争。
<h2>2.7 向第三方架构说不 最终需市场检验</h2>
在最后快要散场的时候，笔者单独问了Nandan Nayampally一个重要问题：“高通苹果三星都有自己的架构，那么DynamIQ技术是否也能让他们收益呢。” Nandan Nayampally的回答是 No。从这个答案中能看出未来ARM阵营自身也将会在各个前沿市场展开大战。目前看来ARM公司自身的DynamIQ解决方案确实覆盖了各个市场和应用场景。但高通苹果毕竟也不是吃素的，在占领了智能手机和平板的高端芯片架构市场后，也必将在其他市场有所行动，就像高通收购NXP进攻车载市场一样。

<img class="aligncenter" src="http://yuenshome-wordpress.stor.sinaapp.com/uploads/2017/03/arm-05.jpg" alt="QQ截图20170327084434.jpg" width="450" height="329" data-bd-imgshare-binded="1" />
<p style="text-align: center;">三星华为用的都是Mali GPU</p>
作为ARM阵营的领导者ARM公司，自然希望有更多的合作伙伴能使用自身倡导的解决方案，这有点类似于今天安卓系统中，谷歌希望更多的手机厂商可以采用原生安卓。当然，两者之间还是有一定的区别，<strong><span style="color: #ff0000;">相比谷歌牢牢控制底层核心代码，ARM在授权方面依然开明很多，就像每次指令集升级时都会邀请顶级合作伙伴共同参与修改和测试，同时在架构方面也允许顶级合作方随意修改</span></strong>。但就像今天越来越多的合作伙伴开始采用ARM公司的Mali GPU作为解决方案一样，当更多的企业直接采用ARM公司自身的完整解决方案，对于ARM公司来说必定是一个很大的利好，只是最终DynamIQ是否能成为架构竞争中的佼佼者还要接受市场的检验。
<h1>转载自</h1>
<ol>
	<li>ARM内核和架构的关系（超形象） - 博客频道 - CSDN.NET
http://blog.csdn.net/u013485792/article/details/50607359</li>
	<li>震惊！ARM全新架构竟然如此彪悍 - 21IC中国电子网
http://www.21ic.com/news/mcu/201703/711959.htm</li>
</ol>

